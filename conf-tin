#!/bin/sh
# rm -f config.cache config.status config.log
if test ! -f configure
then
        autoconf
fi

INSTALL="td-install"
CFLAGS="-O"
CC="${CC-cc}"
TOP="/usr/local/"

NETLIBS=""
case `uname -s` in
api20|opera15)
        NETLIBS="-lsocket"
        ;;
AIX)
        ;;
CLIX)
        NETLIBS="-lbsd"
        ;;
Linux)
        INSTALL=install
        ;;
HP-UX)
        ;;
SunOS)
        case `uname -r` in
        5.*)
                NETLIBS="-lsocket -lnsl"
                ;;
        esac
        ;;
UNIX_SV)
        NETLIBS="-lresolv -lsocket -lnsl"
        ;;
esac

if test -n "$NETLIBS" ; then
        LIBS="$LIBS $NETLIBS"
        export LIBS
fi

INSTALL="$INSTALL" \
CFLAGS="$CFLAGS" \
CC="$CC" \
./configure --verbose \
        --prefix=$TOP \
        --exec-prefix=$TOP \
        --enable-echo \
        --disable-debug \
        --enable-prototypes \
        --enable-warnings \
	--with-libdir="" \
	--with-spooldir="" \
	--with-mail-gateway="" \
        --with-mail-domain=akk.uni-karlsruhe.de \
	--with-nntp-default-server=news.akk.uni-karlsruhe.de \
        --disable-mail-handling \
	--enable-nntp-only \
	--enable-color \
	--enable-ref-threading \
	--disable-etiquette \
	--disable-forgery 
        $OPTS $* 2>&1 |tee -a $OUT
