Compilation and installation notes for NNTP patches - 01-12-93
--------------------------------------------------------------

Note: this patch is only valid when applied to the nntp 1.5.11t5 distribution
      available from  ftp.uu.net:news/nntp/nntp-t5.tar.gz      

This document explains the install procedure for the supplied patch to the
NNTP server nntpd.

NNTP server
-----------
1) Copy the following file to <nntpt5-top-level-source-dir>
     cp nntpd.patch <nntpt5-top-level-source-dir>

2) Patch the files in <nntpt5-top-level-source-dir>
     cd <nntpt5-top-level-source-dir>
     patch < nntpd.patch

3) Edit <nntpt5-top-level-source-dir>/conf.h to suit your sites needs. 
   The XMOTD, XOVER & XUSER extensions are #defined by default. 
   You may need to change the path for the #define's for 
   XINDEX_DIR, XMOTD_FILE & SUBSCRIBTIONS_FILE. 
   The default for XINDEX_DIR is /usr/spool/news/.index and for the
   others /usr/lib/news/[motd | subscriptions]
     cd <nntpt5-top-level-source-dir>
     [vi|emacs] conf.h

4) Recompile & install the NNTP server nntpd
     cd  <nntpt5-top-level-source-dir>
     make
     make install

TIN client
----------
1) Nothing needs to changed in the tin client as long as you originally
   compiled tin with -DNNTP_ABLE or -DNNTP_ONLY. You will have to remove
   -DDONT_HAVE_NNTP_EXTS from the CFLAGS in the Makefile and recompile
   if it was originally defined.

2) Recompile & install tin.
     cd <tin-dir>
     make <system>
     make install

TIN daemon tind (on NNTP server)
--------------------------------
Note that tind is only necessary if your Cnews/INN is not generating nov
style .overview index files.  You should really enable/upgrade your Cnews
or INN news transport system to take advantage of the nov index files.

1) Edit tin Makefile to enable index daemon functionality.
     cd <tin-dir>
     [vi|emacs] Makefile
     Add -DINDEX_DAEMON to CFLAGS to create a version of tin 'tind' to
     create & update index files on the NNTP server.

2) Compile & install tind.
     cd <tin-dir>
     make <system>
     make install_daemon

3) Add entry to crontab to start 'tind' index daemon every so often.
     cd /usr/spool/cron/crontabs
     [vi|emacs] root
     Add following line to run tind every 30 minutes: 
       0,30 * * * * su news -c '/usr/lib/news/tind'

OK. If you have gotten this far you will have the following configuration:
  o  tind will be run from cron every 30 minutes to update the index files.

  o  The NNTP server nntpd will service all requests for index files from 
     tin clients.  It will do this by returning the contents of the group
     index file.

  o  The tin client will issue requests for index files to the NNTP server
     therefore saving space on the client machine and ensuring that there
     are only one copy of index files on the whole network.  Also clients
     will not have to wait while index files are built locally as the index
     daemon tind runs frequently on the news server.
             
Enjoy & happy newsreading

Iain
